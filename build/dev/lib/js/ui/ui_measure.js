"use strict";define(["./ui_element","../../vendor/leonardo-ui.min"],function(e,s){return{registerEvents:function(n,r){n.aggregationList=["Sum","Count","Avg","Min","Max","Log",""];var i=null;n.isMeasureListOpened=[],n.openMeasureList=function(a,o){if(n.isMeasureListOpened[o])n.isMeasureListOpened[o]=!1;else{n.isMeasureListOpened[o]=!0;var t=a.currentTarget;i=s.popover({content:e.listMeasureElement.replace("<id>",""+o),closeOnEscape:!0,dock:"right",alignTo:t,onClose:function(){n.$apply(function(e){e.isMeasureListOpened[o]=!1,e.meaSearchString=""})}}),r($("div.lui-popover"))(n)}},n.drilldownMeasure=function(s,i,a){n.measureId=s;var o=e.listAggrMeasureElement.replace("<measureId>",""+s),t=o.replace("<measureId>",""+s),u=t.replace("<expressionName>",""+i),p=u.replace("<expressionValue>",""+a);$("div.lui-popover").html(p),r($("div.lui-popover"))(n)},n.goBackMeasure=function(s,i){$("div.lui-popover").replaceWith(e.listMeasureElement.replace("<id>",""+i)),r($("div.lui-popover"))(n)},n.selectMeasure=function(e,s,r){for(var a=e;a>=0;a--)"undefined"==typeof n.layout.props.measures[a]&&(e=a);var o=null;o=/\s/.test(r)?s+"(["+r+"])":s+"("+r+")",n.backendApi.applyPatches([{qPath:"/props/measures/"+e,qOp:"add",qValue:JSON.stringify({label:o,expression:o})}],!1),i.close()},n.removeMeasure=function(e){n.backendApi.applyPatches([{qPath:"/props/measures/"+e,qOp:"remove"}],!1)},n.addButton=function(e){n.customMinMeas[e]+=1},n.removeButton=function(e){n.customMinMeas[e]>n.minMeas&&("undefined"!=typeof n.layout.props.measures[n.customMinMeas[e]-1]&&n.removeMeasure(n.customMinMeas[e]-1),n.customMinMeas[e]-=1)}}}});
//# sourceMappingURL=../../maps/ui/ui_measure.js.map
